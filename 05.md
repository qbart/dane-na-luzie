# SQL w praktyce

## Najważniejsze konstrukcje SQL

- **SELECT** - projekcja danych (służy do określenia, co chcemy wyświetlić)
- **FROM** - źródło danych (określa główną tabelę)
- **JOIN** - łączenie informacji (umożliwia budowanie kontekstu z kilku tabel)
- **WHERE** - filtrowanie (zawężenia wyników)
- **GROUP BY + agregacje** - podsumowanie danych (pozwala na odpowiedzi typu "ile / które / w jakiej liczbie".)
- **ORDER BY** - sortowanie wyników (dla rankingów, list, analiz)
- **LIMIT / OFFSET** - ograniczanie wyników

## Podstawowe operacje

- SELECT
- INSERT
- UPDATE
- DELETE

```sql
-- pobranie 10 kursow posortowanych po nazwie
SELECT * FROM course ORDER BY name LIMIT 10;
```

```sql
-- pobranie lekcji z kursu o ID = 1
SELECT * FROM lesson WHERE course_id = 1;
```

```sql
-- dodanie kursu
INSERT INTO course (name, description)
  VALUES ('Yoga', 'Praktyka łącząca świadomy oddech z łagodnym ruchem');
```

```sql
-- aktualizacja ceny 199 i waluty dla kursu o ID = 1
UPDATE course SET price = 199.0, currency = 'PLN' WHERE id = 1;
```

```sql
-- usuniecie kursu o id = 1
DELETE FROM course WHERE id = 1;
```

## Ograniczenia

Każda tabela powinna mieć **przynajmniej 1 klucz główny** (`PRIMARY KEY`), które jednoznacznie identfikuje obiekt w tabeli.
Może to być wartość tworzona przez system, która nie ma znacznie biznesowego (tzw. surrogate key) lub klucz naturlany.

Przykłady identyfikatorów bez znaczenia biznesowego:
- 1, 2, 3, ...
- 7eaad914-971e-4973-92c7-047c606ea3f9, f2a06af8-c7a0-4211-8609-e4761e531990

Przykłady kluczy naturalnych:
- kody krajów: PL, DE, 
- PESEL
- ...

> [!TIP]
> Mimo kluczy naturalnych często używa się technicznych identyfikatorów wewnętrznych

## Dokumentacja

https://www.postgresql.org/docs/16/sql-select.html
